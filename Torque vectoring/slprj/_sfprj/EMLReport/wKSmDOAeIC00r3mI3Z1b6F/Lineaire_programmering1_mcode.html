<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type0" id="S2T0U3">Trl</span>,<span class="var type0" id="S3T0U4">Trr</span>,<span class="var type0" id="S4T0U5">Mz_sat</span>] = Lineaire_programmering(<span class="var type1" id="S5T1U8">Trl_max</span>,<span class="var type1" id="S6T1U9">Trr_max</span>,<span class="var type1" id="S7T1U10">Vzwp</span>,<span class="var type1" id="S8T1U11">Mz</span>,<span class="var type1" id="S9T1U12">Pedal</span>,<span class="var type1" id="S10T1U13">Omega_rl</span>,<span class="var type1" id="S11T1U14">Omega_rr</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%Deze blok staat in voor het berekenen van de te leveren torque per wiel</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%aan de hand van twee lineaire doelen. Het eerste doel is het netto moment</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%rond het zwaartepunt optimaliseren. Het tweede doel is de torque die wordt</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%overgedragen op het wegdek optimaliseren.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T1:U8"><span class="var type1" id="S12T1U17">M</span>       =<span class="mxinfo " id="T1:U10">265</span></span>;               </span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T1:U11"><span class="var type1" id="S13T1U21">L</span>       =<span class="mxinfo " id="T1:U13">1.525</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T1:U14"><span class="var type1" id="S14T1U25">Lf</span>      =<span class="mxinfo " id="T1:U16">0.780</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T1:U17"><span class="var type1" id="S15T1U29">Lr</span>      =<span class="mxinfo " id="T1:U19">0.745</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T1:U20"><span class="var type1" id="S16T1U33">Tf</span>      =<span class="mxinfo " id="T1:U22">1.200</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T1:U23"><span class="var type1" id="S17T1U37">Tr</span>      =<span class="mxinfo " id="T1:U25">1.200</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T1:U26"><span class="var type1" id="S18T1U41">g</span>       =<span class="mxinfo " id="T1:U28">9.81</span></span>;              </span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T1:U29"><span class="var type1" id="S19T1U45">Ksf</span>     =<span class="mxinfo " id="T1:U31">12153</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T1:U32"><span class="var type1" id="S20T1U49">Ksr</span>     =<span class="mxinfo " id="T1:U34">14563</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T1:U35"><span class="var type1" id="S21T1U53">Krf_a</span>   =<span class="mxinfo " id="T1:U37">183.26</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T1:U38"><span class="var type1" id="S22T1U57">Krr_a</span>   =<span class="mxinfo " id="T1:U40">325.31</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T1:U41"><span class="var type1" id="S23T1U61">Kwf</span>     =<span class="mxinfo " id="T1:U43">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T1:U44"><span class="var type1" id="S24T1U65">Kwr</span>     =<span class="mxinfo " id="T1:U46">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T1:U47"><span class="var type1" id="S25T1U69">Hrcf</span>    =<span class="mxinfo " id="T1:U49">0.032</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T1:U50"><span class="var type1" id="S26T1U73">Hrcr</span>    =<span class="mxinfo " id="T1:U52">0.041</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T1:U53"><span class="var type1" id="S27T1U77">Hurcf</span>   =<span class="mxinfo " id="T1:U55">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T1:U56"><span class="var type1" id="S28T1U81">Hurcr</span>   =<span class="mxinfo " id="T1:U58">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T1:U59"><span class="var type1" id="S29T1U85">H</span>       =<span class="mxinfo " id="T1:U61">0.2735</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo " id="T1:U62"><span class="var type1" id="S30T1U89">D</span>       =<span class="mxinfo " id="T1:U64">0.2369</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T1:U65"><span class="var type1" id="S31T1U93">Rm</span>      =<span class="mxinfo " id="T1:U67">576.35</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo " id="T1:U68"><span class="var type1" id="S32T1U97">Reff</span>    =<span class="mxinfo " id="T1:U70">0.2325</span></span>;            </span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="mxinfo " id="T1:U71"><span class="var type1" id="S33T1U101">Gr</span>      =<span class="mxinfo " id="T1:U73">10.32</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T1:U74"><span class="var type1" id="S34T1U105">Sr</span>      =<span class="mxinfo " id="T1:U76">0.600</span></span>;             </span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo " id="T1:U77"><span class="var type1" id="S35T1U109">Tmax</span>    =<span class="mxinfo " id="T1:U79">38.5</span></span>;              </span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T1:U80"><span class="var type1" id="S36T1U113">Cte</span>     =<span class="mxinfo " id="T1:U82">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo " id="T1:U83"><span class="var type1" id="S37T1U117">ax</span>      =<span class="mxinfo " id="T1:U85">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo " id="T1:U86"><span class="var type1" id="S38T1U121">ay</span>      =<span class="mxinfo " id="T1:U88">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35">35</a></span><span class="line"><span class="mxinfo " id="T1:U89"><span class="var type1" id="S39T1U125">Mu_f</span>    =<span class="mxinfo " id="T1:U91">8.5</span></span>;               </span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36">36</a></span><span class="line"><span class="mxinfo " id="T1:U92"><span class="var type1" id="S40T1U129">Mu_r</span>    =<span class="mxinfo " id="T1:U94">8.5</span></span>;               </span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo " id="T1:U95"><span class="var type1" id="S41T1U133">R1</span>      =<span class="mxinfo " id="T1:U97">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo " id="T1:U98"><span class="var type1" id="S42T1U137">R2</span>      =<span class="mxinfo " id="T1:U100">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39">39</a></span><span class="line"><span class="mxinfo " id="T1:U101"><span class="var type1" id="S43T1U141">R4_x</span>    =<span class="mxinfo " id="T1:U103">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo " id="T1:U104"><span class="var type1" id="S44T1U145">R4_y</span>    =<span class="mxinfo " id="T1:U106">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41">41</a></span><span class="line"><span class="mxinfo " id="T1:U107"><span class="var type1" id="S7T1U149">Vzwp</span>    =<span class="mxinfo " id="T1:U109">0</span></span>;                 </span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42">42</a></span><span class="line"><span class="mxinfo " id="T1:U110"><span class="var type1" id="S45T1U153">mu_max</span>  =<span class="mxinfo " id="T1:U112">0.9</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43">43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44">44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45">45</a></span><span class="line"><span class="comment">%Gevraagd Moment</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46">46</a></span><span class="line"><span class="mxinfo " id="T1:U113"><span class="var type1" id="S46T1U157">TV_control</span> = <span class="mxinfo " id="T1:U115">(<span class="mxinfo " id="T1:U116"><span class="var type1" id="S8T1U161">Mz</span>*<span class="var type1" id="S32T1U162">Reff</span></span>)/(<span class="mxinfo " id="T1:U119">2*<span class="var type1" id="S34T1U167">Sr</span>*<span class="var type1" id="S33T1U168">Gr</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47">47</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48">48</a></span><span class="line"><span class="mxinfo " id="T1:U122"><span class="var type1" id="S47T1U171">TV_max_1</span> = <span class="mxinfo " id="T1:U124">min(<span class="mxinfo " id="T1:U125">400</span>,(<span class="mxinfo " id="T1:U126">(<span class="mxinfo " id="T1:U127"><span class="var type1" id="S5T1U179">Trl_max</span>+<span class="var type1" id="S6T1U180">Trr_max</span></span>)/<span class="mxinfo " id="T1:U130">2</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49">49</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"><span class="var type0" id="S49T0U184">f</span> = [<span class="message error" id="M1F1C">Trr_1</span> Trl_1 e];</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"><span class="var type0" id="S53T0U195">A</span> = [<span class="message error" id="M2F1C">Trr_1</span> Trl_1</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line">    0];</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="var type0" id="S54T0U206">b</span> = [<span class="var type1" id="S35T1U209">Tmax</span> <span class="message error" id="M3F1C">e</span>];</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line"><span class="var type0" id="S55T0U214">Aeq</span> = [<span class="message error" id="M4F1C">Trr_1</span> -Trl_1 e];</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T1:U132"><span class="var type1" id="S56T1U226">beq</span> = <span class="mxinfo " id="T1:U134"><span class="mxinfo " id="T1:U135">2</span>*<span class="mxinfo " id="T1:U136">max(<span class="mxinfo " id="T1:U137">-<span class="var type1" id="S47T1U232">TV_max_1</span></span>,<span class="mxinfo " id="T1:U139">min(<span class="var type1" id="S47T1U235">TV_max_1</span>,<span class="var type1" id="S46T1U236">TV_control</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"><span class="var type0" id="S58T0U239">lb</span> = [-<span class="message error" id="M5F1C">Trr_1</span>,-Trl_1];</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"><span class="var type0" id="S59T0U250">ub</span> = [<span class="message error" id="M6F1C">Trr_1</span>,Trl_1];</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"><span class="var type0" id="S60T0U259">x</span> = linprog(<span class="var type0" id="S49T0U262"><span class="message error" id="M7F1C">f</span></span>,<span class="var type0" id="S53T0U263">A</span>,<span class="var type0" id="S54T0U264">b</span>,<span class="var type0" id="S55T0U265">Aeq</span>,<span class="var type0" id="S56T0U266">beq</span>,<span class="var type0" id="S58T0U267">lb</span>,<span class="var type0" id="S59T0U268">ub</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line"><span class="comment">%Gevraagde torque</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line"><span class="var type0" id="S62T0U271">TV_max_2</span> = max(<span class="mxinfo " id="T1:U142">0</span>,min(<span class="mxinfo " id="T1:U143">400</span>,(<span class="var type1" id="S5T1U280">Trl_max</span>-(<span class="message error" id="M8F1C">Ttot</span>/2)),(<span class="var type0" id="S6T0U288">Trr_max</span>+(Ttot/2))));</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="var type0" id="S64T0U296">f_2</span> = [<span class="message error" id="M9F1C">Trr_2</span> Trl_2];</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line"><span class="var type0" id="S67T0U305">A_2</span> = [<span class="message error" id="M10F1C">Trr_2</span> Trl_2];</span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line"><span class="mxinfo " id="T1:U145"><span class="var type1" id="S68T1U314">b_2</span> = <span class="var type1" id="S35T1U315">Tmax</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line"><span class="var type0" id="S69T0U318">Aeq_2</span> = [<span class="message error" id="M11F1C">Trr_2</span> -Trl_2];</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line"><span class="var type0" id="S70T0U328">beq_2</span> = <span class="mxinfo " id="T1:U148">2</span>*max(-<span class="var type0" id="S62T0U334"><span class="message error" id="M12F1C">TV_max_2</span></span>,min(<span class="var type0" id="S62T0U337">TV_max_2</span>,<span class="var type0" id="S46T0U338">TV_control</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line"><span class="var type0" id="S71T0U341">lb_2</span> = [-<span class="message error" id="M13F1C">Trr_2</span>,-Trl_2];</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line"><span class="var type0" id="S72T0U352">ub_2</span> = [<span class="message error" id="M14F1C">Trr_2</span>,Trl_2];</span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73">73</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74">74</a></span><span class="line"><span class="var type0" id="S73T0U361">x_2</span>  = linprog(<span class="var type0" id="S64T0U364"><span class="message error" id="M15F1C">f_2</span></span>,<span class="var type0" id="S67T0U365">A_2</span>,<span class="var type0" id="S68T0U366">b_2</span>,<span class="var type0" id="S69T0U367">Aeq_2</span>,<span class="var type0" id="S70T0U368">beq_2</span>,<span class="var type0" id="S71T0U369">lb_2</span>,<span class="var type0" id="S72T0U370">ub_2</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75">75</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76">76</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77">77</a></span><span class="line"><span class="comment">%Effectieve torques naar motordrives</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78">78</a></span><span class="line"><span class="var type0" id="S2T0U373">Trl</span> = <span class="var type0" id="S60T0U377"><span class="message error" id="M16F1C">x</span></span>(2)*<span class="var type0" id="S36T0U379">Cte</span> + <span class="var type0" id="S73T0U382">x_2</span>(2)*(1-<span class="var type0" id="S36T0U387">Cte</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79">79</a></span><span class="line"><span class="var type0" id="S3T0U390">Trr</span> = <span class="var type0" id="S60T0U394"><span class="message error" id="M17F1C">x</span></span>(1)*<span class="var type0" id="S36T0U396">Cte</span> + <span class="var type0" id="S73T0U399">x_2</span>(1)*(1-<span class="var type0" id="S36T0U404">Cte</span>);</span></span>
</pre>
